# android应用加固原理

## 加固原理

![image-20210319215749305](android应用加固原理.assets/image-20210319215749305.png)

加固过程需要三个对象：

* 需要加密的apk （源apk）
* 自己的壳程序 (负责解密apk工作)
* 加密工具 （将源apk进行加密和壳dex合并成新的dex）

### APK文件结构

| 文件或目录          | 说明                                                         |
| ------------------- | ------------------------------------------------------------ |
| assets文件夹        | 存放资源文件的目录                                           |
| lib文件夹           | 存放ndk编译出来的so文件                                      |
| META-INF文件夹      | 1.该目录下存放的是签名信息，用来保证apk包的完整性和系统的安全性 2.CERT.RS   保存着该应用程序的证书和授权信息 3.CERT.SF  保存着SHA-1信息资源列表  4.MANIFEST.MF  清单信息 |
| res文件夹           | 存放资源文件的目录                                           |
| AndroidManifest.xml | 一个清单文件，它描述了应用的名字、版本、权限、注册的服务等信息。 |
| classes.dex         | java源码编译经过编译后生成的dalvik字节码文件，主要在Dalvik虚拟机上运行的主要代码部分 |
| resources.arsc      | 编译后的二进制资源文件。                                     |



